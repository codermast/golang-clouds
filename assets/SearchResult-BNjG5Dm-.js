import{f as V,q as W,s as X,t as Z,v as ee,x as ae,y as te,z as L,g as j,A as e,B as se,l as re,C as ie,R as A,D as le,E as ne,F as oe,G as ce,H as de,I,J as z,K as me,L as ue,M as pe,j as he,N as ve,O as be,P as ye,Q as ge,S as B,T as ke,U as w}from"./app-Dnf46S7S.js";const qe=["/","/about/","/database/","/dev-idea/","/dev-tools/homebrew.html","/dev-tools/","/front-end/","/java/","/project/","/resource-sharing/e-books.html","/resource-sharing/","/spring-series/","/about/author/","/about/journey/","/computer-basic/computer-composition/","/computer-basic/computer-network/","/computer-basic/computer-network/cn-tcp-3-4.html","/computer-basic/database-principles/","/computer-basic/datastruct/complexity.html","/computer-basic/datastruct/data-structure-concept.html","/computer-basic/datastruct/linear-list.html","/computer-basic/datastruct/","/computer-basic/operating-system/","/computer-basic/software-engineering/","/database/mysql/constraint.html","/database/mysql/dividing-databases-tables.html","/database/mysql/function-base.html","/database/mysql/innodb-engine.html","/database/mysql/innodb-mvcc.html","/database/mysql/master-slave-replication.html","/database/mysql/multi-table-query.html","/database/mysql/mysql-base.html","/database/mysql/mysql-index.html","/database/mysql/mysql-lock.html","/database/mysql/mysql-log.html","/database/mysql/mysql-manage.html","/database/mysql/mysql-trigger.html","/database/mysql/mysql-view.html","/database/mysql/read-write-separation.html","/database/mysql/","/database/mysql/sql-general-syntax.html","/database/mysql/sql-optimize.html","/database/mysql/sql-perfomance-analysis.html","/database/mysql/storage-engine.html","/database/mysql/store-procedure.html","/database/mysql/transaction.html","/database/redis/","/dev-idea/design-patterns/","/dev-tools/docker/docker-basic.html","/dev-tools/docker/docker-compose.html","/dev-tools/docker/docker-container-connection.html","/dev-tools/docker/docker-dockerfile.html","/dev-tools/docker/docker-helloworld.html","/dev-tools/docker/docker-install.html","/dev-tools/docker/docker-introduce.html","/dev-tools/docker/docker-object.html","/dev-tools/docker/docker-warehouse.html","/dev-tools/docker/docker-web-containers.html","/dev-tools/docker/","/dev-tools/git/git-basic-operations.html","/dev-tools/git/git-branch-manage.html","/dev-tools/git/git-content-operations.html","/dev-tools/git/git-introduce-install.html","/dev-tools/git/git-remote-manage.html","/dev-tools/git/git-workspace-index-repo.html","/dev-tools/git/","/dev-tools/maven/introduce-install-config.html","/dev-tools/maven/","/dev-tools/idea/","/dev-tools/idea/shortcuts.html","/front-end/vue3/basic-knowledge.html","/front-end/vue3/component-communication.html","/front-end/vue3/computed.html","/front-end/vue3/create-vue-project.html","/front-end/vue3/life-cycle.html","/front-end/vue3/other-api.html","/front-end/vue3/pinia.html","/front-end/vue3/","/front-end/vue3/router.html","/front-end/vue3/template-grammar.html","/front-end/vue3/vue3-new-component.html","/front-end/vue3/watch.html","/java/collection/list-arraylist.html","/java/collection/list-linkedlist.html","/java/collection/list-stack.html","/java/collection/list-vectore.html","/java/collection/map-hashmap.html","/java/collection/map-linkedhashmap.html","/java/collection/map-treemap.html","/java/collection/queue-deque.html","/java/collection/queue-queue.html","/java/collection/","/java/collection/set-hashset.html","/java/collection/set-linkedhashset.html","/java/collection/set-treeset.html","/java/core/annotation.html","/java/core/basic-grammar.html","/java/core/class-and-object.html","/java/core/exception.html","/java/core/generics.html","/java/core/jdk-env-path.html","/java/core/","/java/core/reflection.html","/java/io/file.html","/java/io/io-stream-system.html","/java/io/","/java/jvm/","/java/thread/","/project/sky-take-out/BackEnd-Dev-Build.html","/project/sky-take-out/Database-Dev-Build.html","/project/sky-take-out/FrontEnd-Dev-Build.html","/project/sky-take-out/","/spring-series/spring/annotations-beans.html","/spring-series/spring/implement-ioc.html","/spring-series/spring/introduction-case.html","/spring-series/spring/","/spring-series/spring/spring-aop.html","/spring-series/spring/spring-aot.html","/spring-series/spring/spring-data-validation.html","/spring-series/spring/spring-i18n.html","/spring-series/spring/spring-ioc.html","/spring-series/spring/spring-junit.html","/spring-series/spring/spring-resources.html","/spring-series/spring/spring-summarize.html","/spring-series/spring/spring-transaction.html","/spring-series/spring/xml-beans.html","/spring-series/springboot/","/spring-series/springcloud/","/spring-series/springmvc/","/computer-basic/computer-network/application-layer/","/computer-basic/computer-network/cn-architecture/","/computer-basic/computer-network/cn-architecture/cn-classification.html","/computer-basic/computer-network/cn-architecture/cn-notion-composition-function.html","/computer-basic/computer-network/data-link-layer/","/computer-basic/computer-network/netwark-layer/","/computer-basic/computer-network/physical-layer/","/computer-basic/computer-network/transaction-layer/","/database/redis/advance/","/database/redis/advance/redis-advance-batch-optimization.html","/database/redis/advance/redis-advance-cache-issues.html","/database/redis/advance/redis-advance-cache-synchronization.html","/database/redis/advance/redis-advance-cluster-best-practices.html","/database/redis/advance/redis-advance-jvm-process-cache.html","/database/redis/advance/redis-advance-key-value-design.html","/database/redis/advance/redis-advance-lua-language.html","/database/redis/advance/redis-advance-master-slave.html","/database/redis/advance/redis-advance-multi-level-cache.html","/database/redis/advance/redis-advance-persistence.html","/database/redis/advance/redis-advance-sentinel.html","/database/redis/advance/redis-advance-server-optimization.html","/database/redis/advance/redis-advance-sharded-cluster.html","/database/redis/client/","/database/redis/client/redis-client-jedis-connection-pool.html","/database/redis/client/redis-client-jedis-quick-start.html","/database/redis/client/redis-client-redistemplate-redis-serializer.html","/database/redis/client/redis-client-spring-data-redis.html","/database/redis/introduce/","/database/redis/introduce/redis-introduction-base-commind.html","/database/redis/introduce/redis-introduction-concept-fundamental.html","/database/redis/introduce/redis-introduction-five-base-datatype.html","/database/redis/introduce/redis-introduction-pub-sub.html","/database/redis/introduce/redis-introduction-scription.html","/database/redis/introduce/redis-introduction-stream.html","/database/redis/introduce/redis-introduction-three-special-datatype.html","/database/redis/introduce/redis-introduction-transaction.html","/database/redis/principle/","/database/redis/principle/redis-principle-IO.html","/database/redis/principle/redis-principle-base-datatype-implement.html","/database/redis/principle/redis-principle-communication-protocol.html","/database/redis/principle/redis-principle-datastruct-underlying-implementation.html","/database/redis/principle/redis-principle-memery-strategy.html","/database/redis/principle/redis-principle-netword-model.html","/database/redis/principle/redis-principle-redisobject.html","/dev-idea/design-patterns/behaiver-patterns/observer-pattern.html","/dev-idea/design-patterns/behaiver-patterns/","/dev-idea/design-patterns/create-patterns/factory-pattern.html","/dev-idea/design-patterns/create-patterns/","/dev-idea/design-patterns/create-patterns/singleton-pattern.html","/dev-idea/design-patterns/structural-patterns/adapter-pattern.html","/dev-idea/design-patterns/structural-patterns/","/404.html","/computer-basic/"],fe="SLIMSEARCH_QUERY_HISTORY",y=B(fe,[]),je=()=>{const{queryHistoryCount:r}=w;return{enabled:r>0,queryHistories:y,addQueryHistory:o=>{y.value=Array.from(new Set([o,...y.value.slice(0,r-1)]))},removeQueryHistory:o=>{y.value=[...y.value.slice(0,o),...y.value.slice(o+1)]}}},C=r=>qe[r.id]+("anchor"in r?`#${r.anchor}`:""),we="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:T}=w,g=B(we,[]),xe=()=>({enabled:T>0,resultHistories:g,addResultHistory:n=>{{const o={link:C(n),display:n.display};"header"in n&&(o.header=n.header),g.value=[o,...g.value.slice(0,T-1)]}},removeResultHistory:n=>{g.value=[...g.value.slice(0,n),...g.value.slice(n+1)]}}),He=r=>{const{page:n,routeLocale:o}=me(),x=ue(),i=L(0),k=j(()=>i.value>0),m=pe([]);return he(()=>{const{search:H,terminate:h}=ve(),q=ye(v=>{const{resultsFilter:Q=s=>s,querySplitter:b,suggestionsFilter:E,...l}=x.value;v?(i.value+=1,H(v,o.value,l).then(s=>Q(s,v,o.value,n.value)).then(s=>{i.value-=1,m.value=s}).catch(s=>{console.warn(s),i.value-=1,i.value||(m.value=[])})):m.value=[]},w.searchDelay-w.suggestDelay,{maxWait:5e3});be([r,o],([v])=>q(v.join(" "))),ge(()=>{h()})}),{isSearching:k,results:m}};var Re=V({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(r,{emit:n}){const o=W(),x=X(),i=Z(ee),{addQueryHistory:k,queryHistories:m,removeQueryHistory:H}=je(),{resultHistories:h,addResultHistory:q,removeResultHistory:v}=xe(),Q=ae(r,"queries"),{results:b,isSearching:E}=He(Q),l=te({isQuery:!0,index:0}),s=L(0),u=L(0),F=j(()=>m.value.length>0||h.value.length>0),R=j(()=>b.value.length>0),S=j(()=>b.value[s.value]||null),M=()=>{const{isQuery:a,index:t}=l;t===0?(l.isQuery=!a,l.index=a?h.value.length-1:m.value.length-1):l.index=t-1},O=()=>{const{isQuery:a,index:t}=l;t===(a?m.value.length-1:h.value.length-1)?(l.isQuery=!a,l.index=0):l.index=t+1},U=()=>{s.value=s.value>0?s.value-1:b.value.length-1,u.value=S.value.contents.length-1},P=()=>{s.value=s.value<b.value.length-1?s.value+1:0,u.value=0},_=()=>{u.value<S.value.contents.length-1?u.value+=1:P()},Y=()=>{u.value>0?u.value-=1:U()},D=a=>a.map(t=>ke(t)?t:e(t[0],t[1])),G=a=>{if(a.type==="customField"){const t=ce[a.index]||"$content",[p,c=""]=de(t)?t[x.value].split("$content"):t.split("$content");return a.display.map(d=>e("div",D([p,...d,c])))}return a.display.map(t=>e("div",D(t)))},f=()=>{s.value=0,u.value=0,n("updateQuery",""),n("close")},J=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},i.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},m.value.map((a,t)=>{const p=l.isQuery&&l.index===t;return e("li",{class:["slimsearch-record-matches",{active:p}],role:"option","aria-selected":p,onClick:()=>{n("updateQuery",a)}},e("div",[e(I,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},a),e("button",{type:"button",class:"slimsearch-remove-icon",title:i.value.remove,"aria-label":i.value.remove,innerHTML:z,onClick:c=>{c.preventDefault(),c.stopPropagation(),H(t)}})]))}))])),K=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},i.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},h.value.map((a,t)=>{const p=!l.isQuery&&l.index===t;return e("li",{class:["slimsearch-record-matches",{active:p}],role:"option","aria-selected":p},e(A,{to:a.link,onClick:()=>{f()}},()=>[e(I,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[a.header?e("div",{class:"slimsearch-record-content-header"},a.header):null,e("div",a.display.map(c=>D(c)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:i.value.remove,"aria-label":i.value.remove,innerHTML:z,onClick:c=>{c.preventDefault(),c.stopPropagation(),v(t)}})]))}))]));return se("keydown",a=>{if(r.isFocusing){if(R.value){if(a.key==="ArrowUp")Y();else if(a.key==="ArrowDown")_();else if(a.key==="Enter"){const t=S.value.contents[u.value];k(r.queries.join(" ")),q(t),o.push(C(t)),f()}}else if(a.key==="ArrowUp")M();else if(a.key==="ArrowDown")O();else if(a.key==="Enter"){const{index:t}=l;l.isQuery?(a.preventDefault(),n("updateQuery",m.value[t])):(o.push(h.value[t].link),f())}}}),re([s,u],()=>{document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active")?.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:r.queries.length?!R.value:!F.value}]},r.queries.length?E.value?e(ie,{hint:i.value.searching}):R.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},b.value.map(({title:a,contents:t},p)=>{const c=s.value===p;return e("div",{class:["slimsearch-record",{active:c}],role:"group","aria-selected":c},[e("div",{class:"slimsearch-record-title"},a||i.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},t.map((d,N)=>{const $=c&&u.value===N;return e("li",{class:["slimsearch-record-matches",{active:$}],role:"option","aria-selected":$},e(A,{to:C(d),onClick:()=>{k(r.queries.join(" ")),q(d),f()}},()=>[d.type==="text"?null:e(d.type==="title"?le:d.type==="heading"?ne:oe,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[d.type==="text"&&d.header?e("div",{class:"slimsearch-record-content-header"},d.header):null,e("div",G(d))])]))}))])})):i.value.emptyResult:F.value?[J(),K()]:i.value.emptyHistory)}});export{Re as default};
