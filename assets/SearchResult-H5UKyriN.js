import{f as V,q as W,s as X,t as Z,v as tt,x as et,y as lt,z as L,g as f,A as t,B as st,l as at,C as rt,R as A,D as it,E as ot,F as nt,G as ut,H as ct,I,J as T,K as mt,L as dt,M as ht,j as gt,N as vt,O as pt,P as kt,Q as bt,S as B,T as yt,U as x}from"./app-D1Ic2z9H.js";const qt=["/","/about/","/interview/golang.html","/interview/java.html","/interview/mysql.html","/interview/","/interview/redis.html","/interview/rocketmq.html","/project/","/tutorials/","/about/author/","/about/journey/","/project/sky-take-out/BackEnd-Dev-Build.html","/project/sky-take-out/Database-Dev-Build.html","/project/sky-take-out/FrontEnd-Dev-Build.html","/project/sky-take-out/","/tutorials/cloud/","/tutorials/database/","/tutorials/dev-idea/","/tutorials/dev-tools/homebrew.html","/tutorials/dev-tools/","/tutorials/front-end/","/tutorials/golang/","/tutorials/java/","/tutorials/mq/mq-comparison.html","/tutorials/mq/","/tutorials/spring-series/","/tutorials/cloud/cicd/","/tutorials/cloud/docker/docker-basic.html","/tutorials/cloud/docker/docker-compose.html","/tutorials/cloud/docker/docker-container-connection.html","/tutorials/cloud/docker/docker-dockerfile.html","/tutorials/cloud/docker/docker-helloworld.html","/tutorials/cloud/docker/docker-install.html","/tutorials/cloud/docker/docker-introduce.html","/tutorials/cloud/docker/docker-object.html","/tutorials/cloud/docker/docker-warehouse.html","/tutorials/cloud/docker/docker-web-containers.html","/tutorials/cloud/docker/","/tutorials/cloud/k8s/k8s-config.html","/tutorials/cloud/k8s/k8s-helm.html","/tutorials/cloud/k8s/k8s-install.html","/tutorials/cloud/k8s/k8s-introduction.html","/tutorials/cloud/k8s/k8s-kubectl.html","/tutorials/cloud/k8s/k8s-monitoring.html","/tutorials/cloud/k8s/k8s-network-security.html","/tutorials/cloud/k8s/k8s-service.html","/tutorials/cloud/k8s/k8s-storage.html","/tutorials/cloud/k8s/k8s-workload.html","/tutorials/cloud/k8s/","/tutorials/cloud/linux/linux-bash.html","/tutorials/cloud/linux/linux-file-directory.html","/tutorials/cloud/linux/linux-network.html","/tutorials/cloud/linux/linux-package.html","/tutorials/cloud/linux/linux-process.html","/tutorials/cloud/linux/linux-scripts.html","/tutorials/cloud/linux/linux-service.html","/tutorials/cloud/linux/linux-user-permission.html","/tutorials/cloud/linux/","/tutorials/cloud/nginx/nginx-https.html","/tutorials/cloud/nginx/nginx-install.html","/tutorials/cloud/nginx/nginx-loadbalance.html","/tutorials/cloud/nginx/nginx-optimization.html","/tutorials/cloud/nginx/nginx-proxy.html","/tutorials/cloud/nginx/nginx-static.html","/tutorials/cloud/nginx/nginx-vhost.html","/tutorials/cloud/nginx/","/tutorials/database/mysql/mysql-architecture.html","/tutorials/database/mysql/mysql-index.html","/tutorials/database/mysql/mysql-lock.html","/tutorials/database/mysql/mysql-optimize.html","/tutorials/database/mysql/mysql-transaction.html","/tutorials/database/mysql/","/tutorials/database/mysql/sql-advanced.html","/tutorials/database/mysql/sql-basic.html","/tutorials/database/redis/","/tutorials/database/redis/redis-advanced.html","/tutorials/database/redis/redis-basic.html","/tutorials/database/redis/redis-cluster.html","/tutorials/database/redis/redis-datatype.html","/tutorials/database/redis/redis-optimize.html","/tutorials/database/redis/redis-persistence.html","/tutorials/database/redis/redis-principle.html","/tutorials/dev-idea/design-patterns/","/tutorials/dev-tools/git/git-basic-operations.html","/tutorials/dev-tools/git/git-branch-manage.html","/tutorials/dev-tools/git/git-content-operations.html","/tutorials/dev-tools/git/git-introduce-install.html","/tutorials/dev-tools/git/git-remote-manage.html","/tutorials/dev-tools/git/git-workspace-index-repo.html","/tutorials/dev-tools/git/","/tutorials/dev-tools/idea/","/tutorials/dev-tools/idea/shortcuts.html","/tutorials/dev-tools/maven/introduce-install-config.html","/tutorials/dev-tools/maven/","/tutorials/front-end/vue3/basic-knowledge.html","/tutorials/front-end/vue3/component-communication.html","/tutorials/front-end/vue3/computed.html","/tutorials/front-end/vue3/create-vue-project.html","/tutorials/front-end/vue3/life-cycle.html","/tutorials/front-end/vue3/other-api.html","/tutorials/front-end/vue3/pinia.html","/tutorials/front-end/vue3/","/tutorials/front-end/vue3/router.html","/tutorials/front-end/vue3/template-grammar.html","/tutorials/front-end/vue3/vue3-new-component.html","/tutorials/front-end/vue3/watch.html","/tutorials/golang/advanced/concurrency.html","/tutorials/golang/advanced/gc.html","/tutorials/golang/advanced/gmp.html","/tutorials/golang/advanced/memory.html","/tutorials/golang/advanced/profiling.html","/tutorials/golang/advanced/","/tutorials/golang/core/go-basic.html","/tutorials/golang/core/go-composite.html","/tutorials/golang/core/go-concurrency.html","/tutorials/golang/core/go-control.html","/tutorials/golang/core/go-error.html","/tutorials/golang/core/go-function.html","/tutorials/golang/core/go-install.html","/tutorials/golang/core/go-interface.html","/tutorials/golang/core/go-module.html","/tutorials/golang/core/go-stdlib.html","/tutorials/golang/core/","/tutorials/golang/distributed/grpc.html","/tutorials/golang/distributed/microservice.html","/tutorials/golang/distributed/mq.html","/tutorials/golang/distributed/","/tutorials/golang/distributed/redis.html","/tutorials/golang/engineering/config.html","/tutorials/golang/engineering/docker.html","/tutorials/golang/engineering/kubernetes.html","/tutorials/golang/engineering/logging.html","/tutorials/golang/engineering/","/tutorials/golang/engineering/testing.html","/tutorials/golang/web/gin-advanced.html","/tutorials/golang/web/gin-start.html","/tutorials/golang/web/gorm-advanced.html","/tutorials/golang/web/gorm-start.html","/tutorials/golang/web/project.html","/tutorials/golang/web/","/tutorials/java/collection/list-arraylist.html","/tutorials/java/collection/list-linkedlist.html","/tutorials/java/collection/list-stack.html","/tutorials/java/collection/list-vectore.html","/tutorials/java/collection/map-hashmap.html","/tutorials/java/collection/map-linkedhashmap.html","/tutorials/java/collection/map-treemap.html","/tutorials/java/collection/queue-deque.html","/tutorials/java/collection/queue-queue.html","/tutorials/java/collection/","/tutorials/java/collection/set-hashset.html","/tutorials/java/collection/set-linkedhashset.html","/tutorials/java/collection/set-treeset.html","/tutorials/java/core/annotation.html","/tutorials/java/core/basic-grammar.html","/tutorials/java/core/class-and-object.html","/tutorials/java/core/common-classes.html","/tutorials/java/core/exception.html","/tutorials/java/core/generics.html","/tutorials/java/core/jdk-env-path.html","/tutorials/java/core/","/tutorials/java/core/reflection.html","/tutorials/java/core/string.html","/tutorials/java/io/buffer-stream.html","/tutorials/java/io/byte-stream.html","/tutorials/java/io/char-stream.html","/tutorials/java/io/file.html","/tutorials/java/io/io-stream-system.html","/tutorials/java/io/nio.html","/tutorials/java/io/","/tutorials/java/jvm/class-loading.html","/tutorials/java/jvm/garbage-collection.html","/tutorials/java/jvm/jvm-memory.html","/tutorials/java/jvm/jvm-tuning.html","/tutorials/java/jvm/","/tutorials/java/thread/atomic.html","/tutorials/java/thread/completable-future.html","/tutorials/java/thread/concurrent-collections.html","/tutorials/java/thread/concurrent-utils.html","/tutorials/java/thread/","/tutorials/java/thread/synchronized-lock.html","/tutorials/java/thread/thread-basic.html","/tutorials/java/thread/thread-pool.html","/tutorials/mq/kafka/kafka-introduction.html","/tutorials/mq/kafka/kafka-producer-consumer.html","/tutorials/mq/kafka/kafka-springboot.html","/tutorials/mq/kafka/","/tutorials/mq/rabbitmq/rabbitmq-exchange.html","/tutorials/mq/rabbitmq/rabbitmq-introduction.html","/tutorials/mq/rabbitmq/rabbitmq-reliability.html","/tutorials/mq/rabbitmq/rabbitmq-springboot.html","/tutorials/mq/rabbitmq/","/tutorials/mq/rocketmq/","/tutorials/mq/rocketmq/rocketmq-introduction.html","/tutorials/mq/rocketmq/rocketmq-message-type.html","/tutorials/mq/rocketmq/rocketmq-springboot.html","/tutorials/spring-series/springboot/","/tutorials/spring-series/springboot/springboot-config.html","/tutorials/spring-series/springboot/springboot-data.html","/tutorials/spring-series/springboot/springboot-quickstart.html","/tutorials/spring-series/springboot/springboot-web.html","/tutorials/spring-series/spring/annotations-beans.html","/tutorials/spring-series/spring/implement-ioc.html","/tutorials/spring-series/spring/introduction-case.html","/tutorials/spring-series/spring/","/tutorials/spring-series/spring/spring-aop.html","/tutorials/spring-series/spring/spring-aot.html","/tutorials/spring-series/spring/spring-data-validation.html","/tutorials/spring-series/spring/spring-i18n.html","/tutorials/spring-series/spring/spring-ioc.html","/tutorials/spring-series/spring/spring-junit.html","/tutorials/spring-series/spring/spring-resources.html","/tutorials/spring-series/spring/spring-summarize.html","/tutorials/spring-series/spring/spring-transaction.html","/tutorials/spring-series/spring/xml-beans.html","/tutorials/spring-series/springcloud/","/tutorials/spring-series/springcloud/springcloud-config.html","/tutorials/spring-series/springcloud/springcloud-discovery.html","/tutorials/spring-series/springcloud/springcloud-feign.html","/tutorials/spring-series/springcloud/springcloud-gateway.html","/tutorials/spring-series/springcloud/springcloud-introduction.html","/tutorials/spring-series/springcloud/springcloud-sentinel.html","/tutorials/spring-series/springmvc/","/tutorials/spring-series/springmvc/springmvc-databind.html","/tutorials/spring-series/springmvc/springmvc-exception.html","/tutorials/spring-series/springmvc/springmvc-interceptor.html","/tutorials/spring-series/springmvc/springmvc-introduction.html","/tutorials/spring-series/springmvc/springmvc-request.html","/tutorials/spring-series/springmvc/springmvc-response.html","/tutorials/dev-idea/design-patterns/behaiver-patterns/observer-pattern.html","/tutorials/dev-idea/design-patterns/behaiver-patterns/","/tutorials/dev-idea/design-patterns/create-patterns/factory-pattern.html","/tutorials/dev-idea/design-patterns/create-patterns/","/tutorials/dev-idea/design-patterns/create-patterns/singleton-pattern.html","/tutorials/dev-idea/design-patterns/structural-patterns/adapter-pattern.html","/tutorials/dev-idea/design-patterns/structural-patterns/","/404.html"],jt="SLIMSEARCH_QUERY_HISTORY",k=B(jt,[]),ft=()=>{const{queryHistoryCount:a}=x;return{enabled:a>0,queryHistories:k,addQueryHistory:n=>{k.value=Array.from(new Set([n,...k.value.slice(0,a-1)]))},removeQueryHistory:n=>{k.value=[...k.value.slice(0,n),...k.value.slice(n+1)]}}},C=a=>qt[a.id]+("anchor"in a?`#${a.anchor}`:""),xt="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:z}=x,b=B(xt,[]),wt=()=>({enabled:z>0,resultHistories:b,addResultHistory:o=>{{const n={link:C(o),display:o.display};"header"in o&&(n.header=o.header),b.value=[n,...b.value.slice(0,z-1)]}},removeResultHistory:o=>{b.value=[...b.value.slice(0,o),...b.value.slice(o+1)]}}),Ht=a=>{const{page:o,routeLocale:n}=mt(),w=dt(),r=L(0),y=f(()=>r.value>0),m=ht([]);return gt(()=>{const{search:H,terminate:g}=vt(),q=kt(v=>{const{resultsFilter:Q=s=>s,querySplitter:p,suggestionsFilter:E,...i}=w.value;v?(r.value+=1,H(v,n.value,i).then(s=>Q(s,v,n.value,o.value)).then(s=>{r.value-=1,m.value=s}).catch(s=>{console.warn(s),r.value-=1,r.value||(m.value=[])})):m.value=[]},x.searchDelay-x.suggestDelay,{maxWait:5e3});pt([a,n],([v])=>q(v.join(" "))),bt(()=>{g()})}),{isSearching:y,results:m}};var Rt=V({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:o}){const n=W(),w=X(),r=Z(tt),{addQueryHistory:y,queryHistories:m,removeQueryHistory:H}=ft(),{resultHistories:g,addResultHistory:q,removeResultHistory:v}=wt(),Q=et(a,"queries"),{results:p,isSearching:E}=Ht(Q),i=lt({isQuery:!0,index:0}),s=L(0),d=L(0),F=f(()=>m.value.length>0||g.value.length>0),R=f(()=>p.value.length>0),S=f(()=>p.value[s.value]||null),M=()=>{const{isQuery:e,index:l}=i;l===0?(i.isQuery=!e,i.index=e?g.value.length-1:m.value.length-1):i.index=l-1},U=()=>{const{isQuery:e,index:l}=i;l===(e?m.value.length-1:g.value.length-1)?(i.isQuery=!e,i.index=0):i.index=l+1},O=()=>{s.value=s.value>0?s.value-1:p.value.length-1,d.value=S.value.contents.length-1},P=()=>{s.value=s.value<p.value.length-1?s.value+1:0,d.value=0},_=()=>{d.value<S.value.contents.length-1?d.value+=1:P()},Y=()=>{d.value>0?d.value-=1:O()},D=e=>e.map(l=>yt(l)?l:t(l[0],l[1])),G=e=>{if(e.type==="customField"){const l=ut[e.index]||"$content",[h,u=""]=ct(l)?l[w.value].split("$content"):l.split("$content");return e.display.map(c=>t("div",D([h,...c,u])))}return e.display.map(l=>t("div",D(l)))},j=()=>{s.value=0,d.value=0,o("updateQuery",""),o("close")},J=()=>t("div",{class:"slimsearch-records"},t("div",{class:"slimsearch-record"},[t("div",{class:"slimsearch-record-title"},r.value.queryHistory),t("ul",{class:"slimsearch-record-contents",role:"listbox"},m.value.map((e,l)=>{const h=i.isQuery&&i.index===l;return t("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h,onClick:()=>{o("updateQuery",e)}},t("div",[t(I,{class:"slimsearch-record-type"}),t("div",{class:"slimsearch-record-content"},e),t("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:T,onClick:u=>{u.preventDefault(),u.stopPropagation(),H(l)}})]))}))])),K=()=>t("ul",{class:"slimsearch-records"},t("li",{class:"slimsearch-record"},[t("div",{class:"slimsearch-record-title"},r.value.resultHistory),t("ul",{class:"slimsearch-record-contents",role:"listbox"},g.value.map((e,l)=>{const h=!i.isQuery&&i.index===l;return t("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h},t(A,{to:e.link,onClick:()=>{j()}},()=>[t(I,{class:"slimsearch-record-type"}),t("div",{class:"slimsearch-record-content"},[e.header?t("div",{class:"slimsearch-record-content-header"},e.header):null,t("div",e.display.map(u=>D(u)).flat())]),t("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:T,onClick:u=>{u.preventDefault(),u.stopPropagation(),v(l)}})]))}))]));return st("keydown",e=>{if(a.isFocusing){if(R.value){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")_();else if(e.key==="Enter"){const l=S.value.contents[d.value];y(a.queries.join(" ")),q(l),n.push(C(l)),j()}}else if(e.key==="ArrowUp")M();else if(e.key==="ArrowDown")U();else if(e.key==="Enter"){const{index:l}=i;i.isQuery?(e.preventDefault(),o("updateQuery",m.value[l])):(n.push(g.value[l].link),j())}}}),at([s,d],()=>{document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active")?.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:a.queries.length?!R.value:!F.value}]},a.queries.length?E.value?t(rt,{hint:r.value.searching}):R.value?t("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},p.value.map(({title:e,contents:l},h)=>{const u=s.value===h;return t("div",{class:["slimsearch-record",{active:u}],role:"group","aria-selected":u},[t("div",{class:"slimsearch-record-title"},e||r.value.defaultTitle),t("ul",{class:"slimsearch-record-contents"},l.map((c,N)=>{const $=u&&d.value===N;return t("li",{class:["slimsearch-record-matches",{active:$}],role:"option","aria-selected":$},t(A,{to:C(c),onClick:()=>{y(a.queries.join(" ")),q(c),j()}},()=>[c.type==="text"?null:t(c.type==="title"?it:c.type==="heading"?ot:nt,{class:"slimsearch-record-type"}),t("div",{class:"slimsearch-record-content"},[c.type==="text"&&c.header?t("div",{class:"slimsearch-record-content-header"},c.header):null,t("div",G(c))])]))}))])})):r.value.emptyResult:F.value?[J(),K()]:r.value.emptyHistory)}});export{Rt as default};
