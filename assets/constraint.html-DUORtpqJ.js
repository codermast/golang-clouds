import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as i,b as t,e as l,d as r,r as h,o as d}from"./app-x2g52BM9.js";const p={},k={style:{"text-align":"center"}};function o(g,s){const e=h("Badge");return d(),n("div",null,[s[9]||(s[9]=i('<h1 id="mysql基础-约束" tabindex="-1"><a class="header-anchor" href="#mysql基础-约束"><span>MySQL基础 - 约束</span></a></h1><h2 id="概念" tabindex="-1"><a class="header-anchor" href="#概念"><span>概念</span></a></h2><p>约束是作用于表中字段上的规则，用于限制存储在表中的数据。</p><h2 id="目的" tabindex="-1"><a class="header-anchor" href="#目的"><span>目的</span></a></h2><p>为了保证数据库中数据的正确、有效性和完整性。</p><h2 id="分类" tabindex="-1"><a class="header-anchor" href="#分类"><span>分类</span></a></h2>',6)),t("table",null,[s[8]||(s[8]=t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"center"}},"约束"),t("th",{style:{"text-align":"center"}},"描述"),t("th",{style:{"text-align":"center"}},"关键字")])],-1)),t("tbody",null,[s[3]||(s[3]=t("tr",null,[t("td",{style:{"text-align":"center"}},"非空约束"),t("td",{style:{"text-align":"center"}},"限制该字段的数据不能为null"),t("td",{style:{"text-align":"center"}},"NOT NULL")],-1)),s[4]||(s[4]=t("tr",null,[t("td",{style:{"text-align":"center"}},"唯一约束"),t("td",{style:{"text-align":"center"}},"保证该字段的所有数据都是唯一，不重复的"),t("td",{style:{"text-align":"center"}},"UNIQUE")],-1)),s[5]||(s[5]=t("tr",null,[t("td",{style:{"text-align":"center"}},"主键约束"),t("td",{style:{"text-align":"center"}},"主键是一行数据的唯一标识，要求非空且唯一"),t("td",{style:{"text-align":"center"}},"PRIMARY KEY")],-1)),s[6]||(s[6]=t("tr",null,[t("td",{style:{"text-align":"center"}},"默认约束"),t("td",{style:{"text-align":"center"}},"保存数据时，如果未指定该字段的值，则赋予该默认值"),t("td",{style:{"text-align":"center"}},"DEFULT")],-1)),t("tr",null,[t("td",k,[s[0]||(s[0]=l("条件约束",-1)),r(e,{text:"8.0.16版本以后",type:"warning"})]),s[1]||(s[1]=t("td",{style:{"text-align":"center"}},"保证字段值满足指定的条件",-1)),s[2]||(s[2]=t("td",{style:{"text-align":"center"}},"CHECK",-1))]),s[7]||(s[7]=t("tr",null,[t("td",{style:{"text-align":"center"}},"外键约束"),t("td",{style:{"text-align":"center"}},"用来让两张表的数据之间建立连接，保证数据的一致性和完整性"),t("td",{style:{"text-align":"center"}},"FOREIGN KEY")],-1))])]),s[10]||(s[10]=i(`<div class="hint-container warning"><p class="hint-container-title">注意</p><p>约束是作用于表中字段上的，可以在创建表/修改表的时候添加约束。</p></div><h2 id="外键约束" tabindex="-1"><a class="header-anchor" href="#外键约束"><span>外键约束</span></a></h2><p>其他5种约束的适用方法较为简单，这里仅对外键约束做详细介绍。</p><h3 id="语法" tabindex="-1"><a class="header-anchor" href="#语法"><span>语法</span></a></h3><ol><li>添加外键</li></ol><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 建表时添加外键</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 表名</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">( </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    字段名 数据类型,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     ... </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    [CONSTRAINT]</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> [外键名称]</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOREIGN KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (外键字段名) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">REFERENCES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 主表 (主表列名) );</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 建表后添加外键</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 表名 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ADD</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> CONSTRAINT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 外键名称 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FOREIGN KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (外键字段名) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">REFERENCES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 主表(主表列名);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>删除外键</li></ol><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 表名 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DROP</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOREIGN KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 外键名称;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="删除-更新行为" tabindex="-1"><a class="header-anchor" href="#删除-更新行为"><span>删除/更新行为</span></a></h3><p>添加了外键之后，再删除父表数据时产生的约束行为，我们就称为删除/更新行为。具体的删除/更新行<br> 为有以下几种:</p><table><thead><tr><th style="text-align:center;">行为</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">NO ACTION</td><td style="text-align:center;">当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新。(与RESTRICT一致)默认行为</td></tr><tr><td style="text-align:center;">RESTRICT</td><td style="text-align:center;">当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新。(与NO ACTION一致)默认行为</td></tr><tr><td style="text-align:center;">CASCADE</td><td style="text-align:center;">当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有，则也删除/更新外键在子表中的记录。</td></tr><tr><td style="text-align:center;">SET NULL</td><td style="text-align:center;">当在父表中删除对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为null（这就要求该外键允许取null）。</td></tr><tr><td style="text-align:center;">SET DEFAULT</td><td style="text-align:center;">父表有变更时，子表将外键列设置成一个默认的值(Innodb不支持)</td></tr></tbody></table><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 表名 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ADD</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> CONSTRAINT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 外键名称 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FOREIGN KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (外键字段) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">REFERENCES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 主表名 (主表字段名) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON UPDATE CASCADE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON DELETE CASCADE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,12))])}const y=a(p,[["render",o]]),m=JSON.parse('{"path":"/database/mysql/constraint.html","title":"MySQL基础 - 约束","lang":"zh-CN","frontmatter":{"order":4,"description":"MySQL基础 - 约束 概念 约束是作用于表中字段上的规则，用于限制存储在表中的数据。 目的 为了保证数据库中数据的正确、有效性和完整性。 分类 注意 约束是作用于表中字段上的，可以在创建表/修改表的时候添加约束。 外键约束 其他5种约束的适用方法较为简单，这里仅对外键约束做详细介绍。 语法 添加外键 删除外键 删除/更新行为 添加了外键之后，再删除...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MySQL基础 - 约束\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-06-13T13:14:10.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"友人\\",\\"url\\":\\"https://www.codermast.com\\",\\"email\\":\\"codermast@163.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.codermast.com/database/mysql/constraint.html"}],["meta",{"property":"og:site_name","content":"友人的编程指南"}],["meta",{"property":"og:title","content":"MySQL基础 - 约束"}],["meta",{"property":"og:description","content":"MySQL基础 - 约束 概念 约束是作用于表中字段上的规则，用于限制存储在表中的数据。 目的 为了保证数据库中数据的正确、有效性和完整性。 分类 注意 约束是作用于表中字段上的，可以在创建表/修改表的时候添加约束。 外键约束 其他5种约束的适用方法较为简单，这里仅对外键约束做详细介绍。 语法 添加外键 删除外键 删除/更新行为 添加了外键之后，再删除..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-06-13T13:14:10.000Z"}],["meta",{"property":"article:modified_time","content":"2023-06-13T13:14:10.000Z"}]]},"git":{"createdTime":1681054749000,"updatedTime":1686662050000,"contributors":[{"name":"codermast","username":"codermast","email":"codermast@qq.com","commits":3,"url":"https://github.com/codermast"}]},"readingTime":{"minutes":2.34,"words":701},"filePathRelative":"database/mysql/constraint.md","autoDesc":true}');export{y as comp,m as data};
