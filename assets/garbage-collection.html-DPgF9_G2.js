import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as n,o as e}from"./app-DpuztuMz.js";const l={};function t(h,s){return e(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="垃圾回收" tabindex="-1"><a class="header-anchor" href="#垃圾回收"><span>垃圾回收</span></a></h1><p>垃圾回收（Garbage Collection，GC）是 JVM 自动管理内存的机制，负责回收不再使用的对象所占用的内存。</p><h2 id="如何判断对象可回收" tabindex="-1"><a class="header-anchor" href="#如何判断对象可回收"><span>如何判断对象可回收</span></a></h2><h3 id="引用计数法" tabindex="-1"><a class="header-anchor" href="#引用计数法"><span>引用计数法</span></a></h3><p>给对象添加一个引用计数器，每当有引用指向它时加 1，引用失效时减 1，计数为 0 时可回收。</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 引用计数法的问题：循环引用</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Node</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> next</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Node</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Node</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Node</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> b </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Node</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">next</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // a 引用 b</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">next</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // b 引用 a</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">b </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// a 和 b 相互引用，计数都不为 0，但都无法访问</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">问题</p><p>引用计数法无法解决循环引用问题，JVM 不使用此方法。</p></div><h3 id="可达性分析" tabindex="-1"><a class="header-anchor" href="#可达性分析"><span>可达性分析</span></a></h3><p>从 <strong>GC Roots</strong> 出发，向下搜索，搜索走过的路径称为引用链。如果一个对象到 GC Roots 没有任何引用链相连，则该对象可回收。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>GC Roots</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    ├── Object 1 ──→ Object 2</span></span>
<span class="line"><span>    │       │</span></span>
<span class="line"><span>    │       └────→ Object 3</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    └── Object 4</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Object 5 ──→ Object 6  ← 不可达，可回收</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="gc-roots" tabindex="-1"><a class="header-anchor" href="#gc-roots"><span>GC Roots</span></a></h3><p>可以作为 GC Roots 的对象：</p><table><thead><tr><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>虚拟机栈中的引用</td><td>栈帧中的局部变量表引用的对象</td></tr><tr><td>方法区中的静态属性</td><td>类的静态变量引用的对象</td></tr><tr><td>方法区中的常量</td><td>常量池中引用的对象</td></tr><tr><td>Native 方法引用的对象</td><td>JNI 引用的对象</td></tr><tr><td>同步锁持有的对象</td><td>synchronized 锁住的对象</td></tr></tbody></table><h2 id="引用类型" tabindex="-1"><a class="header-anchor" href="#引用类型"><span>引用类型</span></a></h2><p>JDK 1.2 后，Java 将引用分为四种类型：</p><h3 id="强引用-strong-reference" tabindex="-1"><a class="header-anchor" href="#强引用-strong-reference"><span>强引用（Strong Reference）</span></a></h3><p>最常见的引用，只要强引用存在，对象就不会被回收。</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> obj </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 强引用</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">obj </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 断开引用后可回收</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="软引用-soft-reference" tabindex="-1"><a class="header-anchor" href="#软引用-soft-reference"><span>软引用（Soft Reference）</span></a></h3><p>内存不足时才会被回收，常用于缓存。</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.lang.ref.SoftReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> obj </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SoftReference</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> softRef </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SoftReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(obj)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">obj </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 获取对象</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> o </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> softRef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 可能返回 null</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="弱引用-weak-reference" tabindex="-1"><a class="header-anchor" href="#弱引用-weak-reference"><span>弱引用（Weak Reference）</span></a></h3><p>下次 GC 时一定会被回收。</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.lang.ref.WeakReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> obj </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">WeakReference</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> weakRef </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> WeakReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(obj)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">obj </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> o </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> weakRef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // null</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="虚引用-phantom-reference" tabindex="-1"><a class="header-anchor" href="#虚引用-phantom-reference"><span>虚引用（Phantom Reference）</span></a></h3><p>最弱的引用，无法通过虚引用获取对象，主要用于跟踪对象被回收的状态。</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.lang.ref.PhantomReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.lang.ref.ReferenceQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ReferenceQueue</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> queue </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ReferenceQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> obj </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PhantomReference</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> phantomRef </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PhantomReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(obj</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> queue)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">obj </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">phantomRef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 始终返回 null</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="引用类型对比" tabindex="-1"><a class="header-anchor" href="#引用类型对比"><span>引用类型对比</span></a></h3><table><thead><tr><th>引用类型</th><th>回收时机</th><th>使用场景</th></tr></thead><tbody><tr><td>强引用</td><td>从不回收</td><td>普通引用</td></tr><tr><td>软引用</td><td>内存不足时</td><td>缓存</td></tr><tr><td>弱引用</td><td>下次 GC</td><td>WeakHashMap</td></tr><tr><td>虚引用</td><td>任何时候</td><td>跟踪回收状态</td></tr></tbody></table><h2 id="垃圾回收算法" tabindex="-1"><a class="header-anchor" href="#垃圾回收算法"><span>垃圾回收算法</span></a></h2><h3 id="标记-清除-mark-sweep" tabindex="-1"><a class="header-anchor" href="#标记-清除-mark-sweep"><span>标记-清除（Mark-Sweep）</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>标记阶段：标记所有可达对象</span></span>
<span class="line"><span>    ┌───┬───┬───┬───┬───┬───┬───┬───┐</span></span>
<span class="line"><span>    │ ✓ │   │ ✓ │   │ ✓ │   │   │ ✓ │</span></span>
<span class="line"><span>    └───┴───┴───┴───┴───┴───┴───┴───┘</span></span>
<span class="line"><span></span></span>
<span class="line"><span>清除阶段：回收未标记的对象</span></span>
<span class="line"><span>    ┌───┬───┬───┬───┬───┬───┬───┬───┐</span></span>
<span class="line"><span>    │ ✓ │   │ ✓ │   │ ✓ │   │   │ ✓ │</span></span>
<span class="line"><span>    └───┴───┴───┴───┴───┴───┴───┴───┘</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>问题：产生内存碎片</span></span>
<span class="line"><span>    ┌───┬───┬───┬───┬───┬───┬───┬───┐</span></span>
<span class="line"><span>    │ A │   │ B │   │ C │   │   │ D │</span></span>
<span class="line"><span>    └───┴───┴───┴───┴───┴───┴───┴───┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>优点</strong>：实现简单<br><strong>缺点</strong>：产生内存碎片</p><h3 id="复制算法-copying" tabindex="-1"><a class="header-anchor" href="#复制算法-copying"><span>复制算法（Copying）</span></a></h3><p>将内存分为两块，每次只使用一块，GC 时将存活对象复制到另一块。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>使用中：</span></span>
<span class="line"><span>    ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐</span></span>
<span class="line"><span>    │ A │   │ B │ C │ │   │   │   │   │</span></span>
<span class="line"><span>    └───┴───┴───┴───┘ └───┴───┴───┴───┘</span></span>
<span class="line"><span>          From              To</span></span>
<span class="line"><span></span></span>
<span class="line"><span>GC 后：</span></span>
<span class="line"><span>    ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐</span></span>
<span class="line"><span>    │   │   │   │   │ │ A │ B │ C │   │</span></span>
<span class="line"><span>    └───┴───┴───┴───┘ └───┴───┴───┴───┘</span></span>
<span class="line"><span>          From              To</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>优点</strong>：无内存碎片，效率高<br><strong>缺点</strong>：内存利用率只有 50%</p><h3 id="标记-整理-mark-compact" tabindex="-1"><a class="header-anchor" href="#标记-整理-mark-compact"><span>标记-整理（Mark-Compact）</span></a></h3><p>标记后将存活对象向一端移动，然后清理边界外的内存。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>标记阶段：</span></span>
<span class="line"><span>    ┌───┬───┬───┬───┬───┬───┬───┬───┐</span></span>
<span class="line"><span>    │ A │   │ B │   │ C │   │   │ D │</span></span>
<span class="line"><span>    └───┴───┴───┴───┴───┴───┴───┴───┘</span></span>
<span class="line"><span></span></span>
<span class="line"><span>整理阶段：</span></span>
<span class="line"><span>    ┌───┬───┬───┬───┬───┬───┬───┬───┐</span></span>
<span class="line"><span>    │ A │ B │ C │ D │   │   │   │   │</span></span>
<span class="line"><span>    └───┴───┴───┴───┴───┴───┴───┴───┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>优点</strong>：无内存碎片，内存利用率高<br><strong>缺点</strong>：移动对象有开销</p><h3 id="分代收集" tabindex="-1"><a class="header-anchor" href="#分代收集"><span>分代收集</span></a></h3><p>根据对象存活周期不同，使用不同的算法。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>┌─────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                     年轻代                           │</span></span>
<span class="line"><span>│   使用复制算法（对象存活率低，复制成本小）             │</span></span>
<span class="line"><span>│   ┌────────────┐  ┌─────┐  ┌─────┐                 │</span></span>
<span class="line"><span>│   │   Eden     │  │ S0  │  │ S1  │                 │</span></span>
<span class="line"><span>│   └────────────┘  └─────┘  └─────┘                 │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>┌─────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                     老年代                           │</span></span>
<span class="line"><span>│   使用标记-清除或标记-整理（对象存活率高）             │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="垃圾收集器" tabindex="-1"><a class="header-anchor" href="#垃圾收集器"><span>垃圾收集器</span></a></h2><h3 id="新生代收集器" tabindex="-1"><a class="header-anchor" href="#新生代收集器"><span>新生代收集器</span></a></h3><h4 id="serial-收集器" tabindex="-1"><a class="header-anchor" href="#serial-收集器"><span>Serial 收集器</span></a></h4><p>单线程收集器，简单高效，适合单核 CPU。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>用户线程 ────────────┬─────────┬────────────────</span></span>
<span class="line"><span>                    │  暂停   │</span></span>
<span class="line"><span>GC 线程             │ ═══════ │</span></span>
<span class="line"><span>                    │ Serial  │</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+UseSerialGC</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="parnew-收集器" tabindex="-1"><a class="header-anchor" href="#parnew-收集器"><span>ParNew 收集器</span></a></h4><p>Serial 的多线程版本，常与 CMS 配合使用。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>用户线程 ────────────┬─────────┬────────────────</span></span>
<span class="line"><span>                    │  暂停   │</span></span>
<span class="line"><span>GC 线程 1           │ ═══════ │</span></span>
<span class="line"><span>GC 线程 2           │ ═══════ │</span></span>
<span class="line"><span>GC 线程 3           │ ═══════ │</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+UseParNewGC</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="parallel-scavenge-收集器" tabindex="-1"><a class="header-anchor" href="#parallel-scavenge-收集器"><span>Parallel Scavenge 收集器</span></a></h4><p>关注吞吐量，适合后台运算任务。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+UseParallelGC</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:MaxGCPauseMillis</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=100</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 最大停顿时间</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:GCTimeRatio</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=99</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">          # 吞吐量（1/(1+99)=1%）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="老年代收集器" tabindex="-1"><a class="header-anchor" href="#老年代收集器"><span>老年代收集器</span></a></h3><h4 id="serial-old-收集器" tabindex="-1"><a class="header-anchor" href="#serial-old-收集器"><span>Serial Old 收集器</span></a></h4><p>Serial 的老年代版本，使用标记-整理算法。</p><h4 id="parallel-old-收集器" tabindex="-1"><a class="header-anchor" href="#parallel-old-收集器"><span>Parallel Old 收集器</span></a></h4><p>Parallel Scavenge 的老年代版本。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+UseParallelOldGC</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="cms-收集器" tabindex="-1"><a class="header-anchor" href="#cms-收集器"><span>CMS 收集器</span></a></h4><p>以最短回收停顿时间为目标，使用标记-清除算法。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>用户线程 ─────┬────┬─────────────┬────┬─────</span></span>
<span class="line"><span>             │初始│             │重新│</span></span>
<span class="line"><span>             │标记│             │标记│</span></span>
<span class="line"><span>GC 线程      │    │ 并发标记    │    │ 并发清除</span></span>
<span class="line"><span>                  └─────────────┘    └──────</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>四个阶段：</p><ol><li><strong>初始标记</strong>：STW，标记 GC Roots 直接关联的对象</li><li><strong>并发标记</strong>：与用户线程并发，标记可达对象</li><li><strong>重新标记</strong>：STW，修正并发标记期间的变动</li><li><strong>并发清除</strong>：与用户线程并发，清除垃圾</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+UseConcMarkSweepGC</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:CMSInitiatingOccupancyFraction</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=75</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 老年代使用率达到 75% 触发</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>CMS 缺点</strong>：</p><ul><li>CPU 敏感</li><li>产生浮动垃圾</li><li>内存碎片</li></ul><h3 id="g1-收集器-jdk-9-默认" tabindex="-1"><a class="header-anchor" href="#g1-收集器-jdk-9-默认"><span>G1 收集器（JDK 9 默认）</span></a></h3><p>面向服务端，低延迟、可预测的停顿时间。</p><h4 id="region-划分" tabindex="-1"><a class="header-anchor" href="#region-划分"><span>Region 划分</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>┌───┬───┬───┬───┬───┬───┬───┬───┐</span></span>
<span class="line"><span>│ E │ E │ S │ O │ O │ H │ O │ E │</span></span>
<span class="line"><span>├───┼───┼───┼───┼───┼───┼───┼───┤</span></span>
<span class="line"><span>│ E │ O │ O │ E │ S │ O │ O │ E │</span></span>
<span class="line"><span>├───┼───┼───┼───┼───┼───┼───┼───┤</span></span>
<span class="line"><span>│ O │ O │ E │ E │ E │ O │ H │ O │</span></span>
<span class="line"><span>└───┴───┴───┴───┴───┴───┴───┴───┘</span></span>
<span class="line"><span></span></span>
<span class="line"><span>E = Eden    S = Survivor    O = Old    H = Humongous</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="工作流程" tabindex="-1"><a class="header-anchor" href="#工作流程"><span>工作流程</span></a></h4><ol><li><strong>初始标记</strong>：STW，标记 GC Roots 直接关联的对象</li><li><strong>并发标记</strong>：与用户线程并发</li><li><strong>最终标记</strong>：STW，处理并发阶段遗留的 SATB 记录</li><li><strong>筛选回收</strong>：STW，按回收价值排序，回收部分 Region</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+UseG1GC</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:MaxGCPauseMillis</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=200</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 期望最大停顿时间</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:G1HeapRegionSize</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=2m</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">       # Region 大小</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="zgc-jdk-11" tabindex="-1"><a class="header-anchor" href="#zgc-jdk-11"><span>ZGC（JDK 11+）</span></a></h3><p>超低延迟收集器，停顿时间不超过 10ms。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+UseZGC</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="收集器对比" tabindex="-1"><a class="header-anchor" href="#收集器对比"><span>收集器对比</span></a></h3><table><thead><tr><th>收集器</th><th>新生代/老年代</th><th>算法</th><th>线程</th><th>特点</th></tr></thead><tbody><tr><td>Serial</td><td>新生代</td><td>复制</td><td>单线程</td><td>简单高效</td></tr><tr><td>ParNew</td><td>新生代</td><td>复制</td><td>多线程</td><td>配合 CMS</td></tr><tr><td>Parallel Scavenge</td><td>新生代</td><td>复制</td><td>多线程</td><td>吞吐量优先</td></tr><tr><td>Serial Old</td><td>老年代</td><td>标记-整理</td><td>单线程</td><td></td></tr><tr><td>Parallel Old</td><td>老年代</td><td>标记-整理</td><td>多线程</td><td>吞吐量优先</td></tr><tr><td>CMS</td><td>老年代</td><td>标记-清除</td><td>并发</td><td>低延迟</td></tr><tr><td>G1</td><td>全堆</td><td>标记-整理+复制</td><td>并发</td><td>可控停顿</td></tr><tr><td>ZGC</td><td>全堆</td><td>标记-整理</td><td>并发</td><td>超低延迟</td></tr></tbody></table><h2 id="gc-类型" tabindex="-1"><a class="header-anchor" href="#gc-类型"><span>GC 类型</span></a></h2><table><thead><tr><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>Minor GC / Young GC</td><td>新生代 GC</td></tr><tr><td>Major GC / Old GC</td><td>老年代 GC</td></tr><tr><td>Full GC</td><td>整堆 GC（包括方法区）</td></tr></tbody></table><h3 id="触发条件" tabindex="-1"><a class="header-anchor" href="#触发条件"><span>触发条件</span></a></h3><p><strong>Minor GC</strong>：Eden 区满</p><p><strong>Full GC</strong>：</p><ul><li>老年代空间不足</li><li>方法区空间不足</li><li><code>System.gc()</code> 调用</li><li>Minor GC 后存活对象大于老年代剩余空间</li></ul><h2 id="小结" tabindex="-1"><a class="header-anchor" href="#小结"><span>小结</span></a></h2><ul><li><strong>可达性分析</strong>：从 GC Roots 出发，不可达的对象可回收</li><li><strong>引用类型</strong>：强 &gt; 软 &gt; 弱 &gt; 虚，影响回收时机</li><li><strong>算法</strong>：标记-清除、复制、标记-整理、分代收集</li><li><strong>收集器</strong>：Serial、ParNew、Parallel、CMS、G1、ZGC</li><li><strong>选择建议</strong>： <ul><li>小内存、单核：Serial</li><li>吞吐量优先：Parallel</li><li>低延迟：CMS、G1</li><li>超低延迟：ZGC</li></ul></li></ul>`,91)])])}const r=i(l,[["render",t]]),k=JSON.parse('{"path":"/other/java/jvm/garbage-collection.html","title":"垃圾回收","lang":"zh-CN","frontmatter":{"order":3,"description":"垃圾回收 垃圾回收（Garbage Collection，GC）是 JVM 自动管理内存的机制，负责回收不再使用的对象所占用的内存。 如何判断对象可回收 引用计数法 给对象添加一个引用计数器，每当有引用指向它时加 1，引用失效时减 1，计数为 0 时可回收。 问题 引用计数法无法解决循环引用问题，JVM 不使用此方法。 可达性分析 从 GC Roots...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"垃圾回收\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-30T10:10:44.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"友人\\",\\"url\\":\\"https://www.codermast.com\\",\\"email\\":\\"codermast@163.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.golangclouds.com/other/java/jvm/garbage-collection.html"}],["meta",{"property":"og:site_name","content":"Golang 全栈指南"}],["meta",{"property":"og:title","content":"垃圾回收"}],["meta",{"property":"og:description","content":"垃圾回收 垃圾回收（Garbage Collection，GC）是 JVM 自动管理内存的机制，负责回收不再使用的对象所占用的内存。 如何判断对象可回收 引用计数法 给对象添加一个引用计数器，每当有引用指向它时加 1，引用失效时减 1，计数为 0 时可回收。 问题 引用计数法无法解决循环引用问题，JVM 不使用此方法。 可达性分析 从 GC Roots..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-30T10:10:44.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-30T10:10:44.000Z"}]]},"git":{"createdTime":1765529054000,"updatedTime":1767089444000,"contributors":[{"name":"友人","username":"","email":"codermast@qq.com","commits":2}]},"readingTime":{"minutes":5.56,"words":1667},"filePathRelative":"other/java/jvm/garbage-collection.md","autoDesc":true}');export{r as comp,k as data};
