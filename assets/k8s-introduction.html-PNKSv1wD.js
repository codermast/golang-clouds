import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a,o as i}from"./app-EbySI1sk.js";const t={};function l(r,e){return i(),n("div",null,[...e[0]||(e[0]=[a(`<h1 id="kubernetes-简介与架构" tabindex="-1"><a class="header-anchor" href="#kubernetes-简介与架构"><span>Kubernetes - 简介与架构</span></a></h1><h2 id="什么是-kubernetes" tabindex="-1"><a class="header-anchor" href="#什么是-kubernetes"><span>什么是 Kubernetes？</span></a></h2><p>Kubernetes（常简称为 K8s，因为 K 和 s 之间有 8 个字母）是一个开源的容器编排平台，最初由 Google 设计并捐赠给云原生计算基金会（CNCF）来维护。</p><p>Kubernetes 的核心目标是让部署容器化应用变得简单高效。它提供了容器的自动化部署、扩展、负载均衡、自愈等能力，让开发者可以专注于业务代码，而不用担心底层基础设施。</p><h2 id="为什么需要-kubernetes" tabindex="-1"><a class="header-anchor" href="#为什么需要-kubernetes"><span>为什么需要 Kubernetes？</span></a></h2><p>在容器化时代之前，应用部署面临诸多挑战：</p><table><thead><tr><th style="text-align:center;">问题</th><th style="text-align:center;">传统方式</th><th style="text-align:center;">Kubernetes 方式</th></tr></thead><tbody><tr><td style="text-align:center;">服务扩缩容</td><td style="text-align:center;">手动添加/移除服务器</td><td style="text-align:center;">自动水平扩缩容</td></tr><tr><td style="text-align:center;">服务发现</td><td style="text-align:center;">硬编码 IP 地址</td><td style="text-align:center;">内置服务发现机制</td></tr><tr><td style="text-align:center;">负载均衡</td><td style="text-align:center;">单独配置负载均衡器</td><td style="text-align:center;">内置负载均衡</td></tr><tr><td style="text-align:center;">滚动更新</td><td style="text-align:center;">停机更新或复杂脚本</td><td style="text-align:center;">零停机滚动更新</td></tr><tr><td style="text-align:center;">故障恢复</td><td style="text-align:center;">人工介入处理</td><td style="text-align:center;">自动检测和恢复</td></tr><tr><td style="text-align:center;">配置管理</td><td style="text-align:center;">分散在各处</td><td style="text-align:center;">集中式配置管理</td></tr></tbody></table><h2 id="kubernetes-的核心特性" tabindex="-1"><a class="header-anchor" href="#kubernetes-的核心特性"><span>Kubernetes 的核心特性</span></a></h2><h3 id="_1-自动化部署与回滚" tabindex="-1"><a class="header-anchor" href="#_1-自动化部署与回滚"><span>1. 自动化部署与回滚</span></a></h3><p>Kubernetes 可以按照预期状态自动部署应用，如果发现问题可以自动回滚到之前的版本。</p><h3 id="_2-服务发现与负载均衡" tabindex="-1"><a class="header-anchor" href="#_2-服务发现与负载均衡"><span>2. 服务发现与负载均衡</span></a></h3><p>Kubernetes 可以使用 DNS 名称或 IP 地址暴露容器。如果到容器的流量很大，Kubernetes 能够自动进行负载均衡。</p><h3 id="_3-自动装箱" tabindex="-1"><a class="header-anchor" href="#_3-自动装箱"><span>3. 自动装箱</span></a></h3><p>根据资源需求和其他约束自动放置容器，同时不牺牲可用性。</p><h3 id="_4-自我修复" tabindex="-1"><a class="header-anchor" href="#_4-自我修复"><span>4. 自我修复</span></a></h3><p>当容器失败时，Kubernetes 会自动重启容器；当节点故障时，会自动替换和重新调度容器；当容器未通过健康检查时，会自动终止并重建。</p><h3 id="_5-密钥与配置管理" tabindex="-1"><a class="header-anchor" href="#_5-密钥与配置管理"><span>5. 密钥与配置管理</span></a></h3><p>Kubernetes 允许存储和管理敏感信息，如密码、OAuth 令牌和 SSH 密钥。可以在不重建容器镜像的情况下更新配置。</p><h3 id="_6-存储编排" tabindex="-1"><a class="header-anchor" href="#_6-存储编排"><span>6. 存储编排</span></a></h3><p>Kubernetes 允许自动挂载所选存储系统，包括本地存储、公有云提供商和网络存储系统。</p><h2 id="kubernetes-架构" tabindex="-1"><a class="header-anchor" href="#kubernetes-架构"><span>Kubernetes 架构</span></a></h2><p>Kubernetes 集群由控制平面（Control Plane）和工作节点（Worker Node）组成。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>┌─────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                         Kubernetes 集群                              │</span></span>
<span class="line"><span>│  ┌─────────────────────────────────────────────────────────────────┐│</span></span>
<span class="line"><span>│  │                     Control Plane (Master)                       ││</span></span>
<span class="line"><span>│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────────────┐  ││</span></span>
<span class="line"><span>│  │  │  API Server  │  │  Scheduler   │  │ Controller Manager   │  ││</span></span>
<span class="line"><span>│  │  └──────────────┘  └──────────────┘  └──────────────────────┘  ││</span></span>
<span class="line"><span>│  │  ┌──────────────────────────────────────────────────────────┐  ││</span></span>
<span class="line"><span>│  │  │                         etcd                              │  ││</span></span>
<span class="line"><span>│  │  └──────────────────────────────────────────────────────────┘  ││</span></span>
<span class="line"><span>│  └─────────────────────────────────────────────────────────────────┘│</span></span>
<span class="line"><span>│                                                                      │</span></span>
<span class="line"><span>│  ┌─────────────────────────────────────────────────────────────────┐│</span></span>
<span class="line"><span>│  │                      Worker Node 1                               ││</span></span>
<span class="line"><span>│  │  ┌─────────┐  ┌─────────────┐  ┌─────────────────────────────┐ ││</span></span>
<span class="line"><span>│  │  │ kubelet │  │ kube-proxy  │  │        Container Runtime    │ ││</span></span>
<span class="line"><span>│  │  └─────────┘  └─────────────┘  └─────────────────────────────┘ ││</span></span>
<span class="line"><span>│  │  ┌─────────────────────────────────────────────────────────────┐││</span></span>
<span class="line"><span>│  │  │  Pod      Pod      Pod      Pod      Pod      Pod          │││</span></span>
<span class="line"><span>│  │  └─────────────────────────────────────────────────────────────┘││</span></span>
<span class="line"><span>│  └─────────────────────────────────────────────────────────────────┘│</span></span>
<span class="line"><span>│                                                                      │</span></span>
<span class="line"><span>│  ┌─────────────────────────────────────────────────────────────────┐│</span></span>
<span class="line"><span>│  │                      Worker Node 2                               ││</span></span>
<span class="line"><span>│  │  ┌─────────┐  ┌─────────────┐  ┌─────────────────────────────┐ ││</span></span>
<span class="line"><span>│  │  │ kubelet │  │ kube-proxy  │  │        Container Runtime    │ ││</span></span>
<span class="line"><span>│  │  └─────────┘  └─────────────┘  └─────────────────────────────┘ ││</span></span>
<span class="line"><span>│  │  ┌─────────────────────────────────────────────────────────────┐││</span></span>
<span class="line"><span>│  │  │  Pod      Pod      Pod      Pod      Pod      Pod          │││</span></span>
<span class="line"><span>│  │  └─────────────────────────────────────────────────────────────┘││</span></span>
<span class="line"><span>│  └─────────────────────────────────────────────────────────────────┘│</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="control-plane-组件" tabindex="-1"><a class="header-anchor" href="#control-plane-组件"><span>Control Plane 组件</span></a></h3><h4 id="_1-kube-apiserver" tabindex="-1"><a class="header-anchor" href="#_1-kube-apiserver"><span>1. kube-apiserver</span></a></h4><p>API Server 是 Kubernetes 控制平面的前端，负责处理所有 REST 请求。它是唯一直接与 etcd 交互的组件。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 所有 kubectl 命令都是通过 API Server 执行的</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pods</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-etcd" tabindex="-1"><a class="header-anchor" href="#_2-etcd"><span>2. etcd</span></a></h4><p>etcd 是一个高可用的分布式键值存储，用于存储 Kubernetes 集群的所有配置数据和状态信息。</p><p><strong>特点：</strong></p><ul><li>分布式存储，支持高可用</li><li>使用 Raft 协议保证一致性</li><li>存储集群的所有元数据</li></ul><h4 id="_3-kube-scheduler" tabindex="-1"><a class="header-anchor" href="#_3-kube-scheduler"><span>3. kube-scheduler</span></a></h4><p>调度器负责监控新创建的、未指定运行节点的 Pod，并为它们选择一个合适的节点运行。</p><p><strong>调度因素：</strong></p><ul><li>资源需求（CPU、内存）</li><li>亲和性/反亲和性规则</li><li>数据本地化</li><li>节点污点和容忍</li></ul><h4 id="_4-kube-controller-manager" tabindex="-1"><a class="header-anchor" href="#_4-kube-controller-manager"><span>4. kube-controller-manager</span></a></h4><p>控制器管理器运行各种控制器进程，包括：</p><ul><li><strong>Node Controller</strong>：负责节点故障检测和响应</li><li><strong>Replication Controller</strong>：维护 Pod 副本数量</li><li><strong>Endpoints Controller</strong>：填充 Endpoints 对象</li><li><strong>Service Account &amp; Token Controllers</strong>：为新命名空间创建默认账户和令牌</li></ul><h3 id="worker-node-组件" tabindex="-1"><a class="header-anchor" href="#worker-node-组件"><span>Worker Node 组件</span></a></h3><h4 id="_1-kubelet" tabindex="-1"><a class="header-anchor" href="#_1-kubelet"><span>1. kubelet</span></a></h4><p>kubelet 是在每个节点上运行的主要代理，负责确保容器在 Pod 中运行。</p><p><strong>主要职责：</strong></p><ul><li>接收 PodSpec 并确保容器运行</li><li>定期汇报节点和 Pod 状态</li><li>执行容器健康检查</li></ul><h4 id="_2-kube-proxy" tabindex="-1"><a class="header-anchor" href="#_2-kube-proxy"><span>2. kube-proxy</span></a></h4><p>kube-proxy 是集群中每个节点上运行的网络代理，负责实现 Kubernetes Service 概念的一部分。</p><p><strong>功能：</strong></p><ul><li>维护节点上的网络规则</li><li>实现 Service 的负载均衡</li><li>支持 TCP/UDP/SCTP 协议转发</li></ul><h4 id="_3-container-runtime" tabindex="-1"><a class="header-anchor" href="#_3-container-runtime"><span>3. Container Runtime</span></a></h4><p>容器运行时是负责运行容器的软件。Kubernetes 支持多种容器运行时：</p><ul><li><strong>containerd</strong>：目前最流行的选择</li><li><strong>CRI-O</strong>：专为 Kubernetes 设计的轻量级运行时</li><li><strong>Docker Engine</strong>（通过 cri-dockerd）</li></ul><h2 id="kubernetes-核心对象" tabindex="-1"><a class="header-anchor" href="#kubernetes-核心对象"><span>Kubernetes 核心对象</span></a></h2><h3 id="pod" tabindex="-1"><a class="header-anchor" href="#pod"><span>Pod</span></a></h3><p>Pod 是 Kubernetes 中最小的可部署单元，可以包含一个或多个容器。</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Pod</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx-pod</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  labels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  containers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx:1.21</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">containerPort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="replicaset" tabindex="-1"><a class="header-anchor" href="#replicaset"><span>ReplicaSet</span></a></h3><p>ReplicaSet 确保指定数量的 Pod 副本始终运行。</p><h3 id="deployment" tabindex="-1"><a class="header-anchor" href="#deployment"><span>Deployment</span></a></h3><p>Deployment 提供了 Pod 和 ReplicaSet 的声明式更新能力。</p><h3 id="service" tabindex="-1"><a class="header-anchor" href="#service"><span>Service</span></a></h3><p>Service 将运行在一组 Pod 上的应用程序公开为网络服务。</p><h3 id="namespace" tabindex="-1"><a class="header-anchor" href="#namespace"><span>Namespace</span></a></h3><p>Namespace 提供了一种将集群资源划分为多个虚拟集群的方法。</p><h2 id="kubernetes-vs-docker-swarm" tabindex="-1"><a class="header-anchor" href="#kubernetes-vs-docker-swarm"><span>Kubernetes vs Docker Swarm</span></a></h2><table><thead><tr><th style="text-align:center;">特性</th><th style="text-align:center;">Kubernetes</th><th style="text-align:center;">Docker Swarm</th></tr></thead><tbody><tr><td style="text-align:center;">学习曲线</td><td style="text-align:center;">陡峭</td><td style="text-align:center;">平缓</td></tr><tr><td style="text-align:center;">安装复杂度</td><td style="text-align:center;">复杂</td><td style="text-align:center;">简单</td></tr><tr><td style="text-align:center;">扩展性</td><td style="text-align:center;">非常强</td><td style="text-align:center;">较强</td></tr><tr><td style="text-align:center;">负载均衡</td><td style="text-align:center;">需要配置</td><td style="text-align:center;">内置</td></tr><tr><td style="text-align:center;">社区支持</td><td style="text-align:center;">非常活跃</td><td style="text-align:center;">活跃</td></tr><tr><td style="text-align:center;">适用场景</td><td style="text-align:center;">大规模生产环境</td><td style="text-align:center;">中小规模环境</td></tr></tbody></table><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>Kubernetes 是当今最流行的容器编排平台，它提供了：</p><ol><li><strong>强大的编排能力</strong>：自动化部署、扩展和管理容器化应用</li><li><strong>高可用性</strong>：自我修复、滚动更新、负载均衡</li><li><strong>可扩展性</strong>：支持大规模集群和自定义扩展</li><li><strong>声明式配置</strong>：使用 YAML 文件描述期望状态</li><li><strong>丰富的生态系统</strong>：Helm、Istio、Prometheus 等</li></ol><div class="hint-container tip"><p class="hint-container-title">下一步</p><p>了解了 Kubernetes 的基本概念和架构后，接下来我们将学习如何安装和配置 Kubernetes 集群。</p></div>`,68)])])}const h=s(t,[["render",l]]),c=JSON.parse('{"path":"/tutorials/cloud/k8s/k8s-introduction.html","title":"Kubernetes - 简介与架构","lang":"zh-CN","frontmatter":{"order":1,"description":"Kubernetes - 简介与架构 什么是 Kubernetes？ Kubernetes（常简称为 K8s，因为 K 和 s 之间有 8 个字母）是一个开源的容器编排平台，最初由 Google 设计并捐赠给云原生计算基金会（CNCF）来维护。 Kubernetes 的核心目标是让部署容器化应用变得简单高效。它提供了容器的自动化部署、扩展、负载均衡、自...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Kubernetes - 简介与架构\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-12T08:44:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Golang Clouds\\",\\"url\\":\\"https://www.golangclouds.com\\",\\"email\\":\\"codermast@163.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.golangclouds.com/tutorials/cloud/k8s/k8s-introduction.html"}],["meta",{"property":"og:site_name","content":"Golang Clouds"}],["meta",{"property":"og:title","content":"Kubernetes - 简介与架构"}],["meta",{"property":"og:description","content":"Kubernetes - 简介与架构 什么是 Kubernetes？ Kubernetes（常简称为 K8s，因为 K 和 s 之间有 8 个字母）是一个开源的容器编排平台，最初由 Google 设计并捐赠给云原生计算基金会（CNCF）来维护。 Kubernetes 的核心目标是让部署容器化应用变得简单高效。它提供了容器的自动化部署、扩展、负载均衡、自..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-12T08:44:14.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-12T08:44:14.000Z"}]]},"git":{"createdTime":1765529054000,"updatedTime":1765529054000,"contributors":[{"name":"友人","username":"","email":"codermast@qq.com","commits":1}]},"readingTime":{"minutes":4.65,"words":1394},"filePathRelative":"tutorials/cloud/k8s/k8s-introduction.md","autoDesc":true}');export{h as comp,c as data};
